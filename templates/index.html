<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Bharat LawBot – Indian Legal Defence Assistant</title>
    <meta
      name="description"
      content="Bharat LawBot is a defence-oriented Indian legal assistant that helps you understand Indian laws, FIRs, bail, matrimonial disputes, property issues and more, so you can speak clearly with your advocate."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=DM+Serif+Display&family=Merriweather:wght@300;400;700&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap & Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <style>
      /* =========================================
         THEME TOKENS (DEFAULT = DARK)
         ========================================= */
      :root {
        --bl-bg: #05060b;
        --bl-surface: rgba(9, 11, 19, 0.98);
        --bl-surface-soft: rgba(15, 18, 30, 0.98);
        --bl-border-soft: rgba(209, 194, 158, 0.6);
        --bl-text-main: #f9fafb;
        --bl-text-subtle: #d1d5db;
        --bl-accent-gold: #f5c15a;
        --bl-accent-gold-soft: rgba(245, 193, 90, 0.16);
        --bl-accent-deep: #b45309;
        --bl-user-bubble: #145c8b;
        --bl-bot-bubble: #13101e;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      body {
        min-height: 100%;
        display: flex;
        flex-direction: column;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        background:
          radial-gradient(circle at 0 0, rgba(245, 193, 90, 0.16), transparent 60%),
          radial-gradient(circle at 100% 100%, rgba(56, 189, 248, 0.2), transparent 60%),
          var(--bl-bg);
        color: var(--bl-text-main);
        overflow: hidden;
      }

      .text-muted {
        color: var(--bl-text-subtle) !important;
      }

      /* =========================================
         REUSABLE LOGO MARK
         ========================================= */
      .bl-logo-mark {
        width: 44px;
        height: 44px;
        border-radius: 16px;
        background:
          radial-gradient(circle at 30% 0, #facc6b, #b45309),
          radial-gradient(circle at 130% 140%, #020617, #020617);
        box-shadow:
          0 12px 24px rgba(15, 23, 42, 0.9),
          inset 0 0 0 1px rgba(250, 204, 21, 0.75);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .bl-logo-inner {
        position: relative;
        width: 26px;
        height: 26px;
      }

      .bl-logo-pillar {
        position: absolute;
        bottom: 4px;
        left: 50%;
        transform: translateX(-50%);
        width: 4px;
        height: 12px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.95);
      }

      .bl-logo-topbar {
        position: absolute;
        top: 8px;
        left: 4px;
        right: 4px;
        height: 2px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.95);
      }

      .bl-logo-inner::before,
      .bl-logo-inner::after {
        content: "";
        position: absolute;
        bottom: 4px;
        width: 9px;
        height: 5px;
        border-radius: 999px 999px 2px 2px;
        background: rgba(249, 250, 251, 0.96);
        border: 1px solid rgba(15, 23, 42, 0.85);
      }

      .bl-logo-inner::before {
        left: 0;
      }
      .bl-logo-inner::after {
        right: 0;
      }

      .bl-logo-text {
        position: absolute;
        bottom: 9px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 7px;
        font-weight: 700;
        letter-spacing: 0.08em;
        color: #111827;
      }

      /* =========================================
         NAVBAR
         ========================================= */
      .bl-navbar {
        background:
          radial-gradient(circle at 0 0, rgba(248, 250, 252, 0.08), transparent 65%),
          rgba(8, 10, 20, 0.96);
        border-bottom: 1px solid rgba(148, 132, 96, 0.55);
        backdrop-filter: blur(18px);
        flex-shrink: 0;
      }

      .bl-nav-inner {
        max-width: 1240px;
        margin: 0 auto;
        padding: 0.55rem 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.9rem;
      }

      @media (max-width: 576px) {
        .bl-nav-inner {
          flex-direction: column;
          align-items: flex-start;
        }
      }

      .bl-brand {
        display: flex;
        align-items: center;
        gap: 0.7rem;
        text-decoration: none;
        color: inherit;
      }

      .bl-brand-text {
        display: flex;
        flex-direction: column;
        gap: 0.08rem;
      }

      .bl-brand-title {
        font-family: "DM Serif Display", "Times New Roman", serif;
        font-size: 1.15rem;
        letter-spacing: 0.05em;
        text-transform: uppercase;
      }

      .bl-brand-subtitle {
        font-size: 0.8rem;
        color: var(--bl-text-subtle);
      }

      .bl-nav-right {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
      }

      .bl-online-pill {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.2rem 0.7rem;
        border-radius: 999px;
        border: 1px solid rgba(34, 197, 94, 0.5);
        background: rgba(22, 163, 74, 0.92);
        color: #e5fbe4;
        font-size: 0.72rem;
      }

      .bl-dot {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        background-color: #bbf7d0;
        box-shadow: 0 0 6px rgba(34, 197, 94, 0.9);
      }

      .bl-badge-soft {
        font-size: 0.72rem;
        border-radius: 999px;
        padding: 0.24rem 0.7rem;
        border: 1px solid rgba(148, 132, 96, 0.55);
        color: var(--bl-text-subtle);
        background: rgba(18, 20, 32, 0.98);
      }

      .bl-theme-toggle {
        border-radius: 999px;
        border: 1px solid rgba(148, 132, 96, 0.55);
        padding: 0.25rem 0.7rem;
        background: rgba(18, 20, 32, 0.98);
        color: var(--bl-text-main);
        font-size: 0.8rem;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        cursor: pointer;
      }

      .bl-theme-toggle i {
        font-size: 0.9rem;
      }

      /* =========================================
         MAIN LAYOUT
         ========================================= */
      .bl-main {
        flex: 1 1 auto;
        display: flex;
        padding: 0.75rem 0.85rem 0.85rem;
        overflow: hidden;
      }

      .bl-main-inner {
        max-width: 1240px;
        margin: 0 auto;
        width: 100%;
        display: flex;
      }

      .bl-grid {
        display: grid;
        grid-template-columns: minmax(0, 0.95fr) minmax(0, 2.05fr);
        gap: 1rem;
        width: 100%;
        height: 100%;
      }

      @media (max-width: 992px) {
        body {
          overflow: auto;
        }
        .bl-main {
          overflow: visible;
          height: auto;
        }
        .bl-main-inner {
          display: block;
        }
        .bl-grid {
          grid-template-columns: minmax(0, 1fr);
          height: auto;
        }
      }

      /* =========================================
         LEFT PANEL – INFO
         ========================================= */
      .bl-info-card {
        border-radius: 18px;
        border: 1px solid var(--bl-border-soft);
        background:
          radial-gradient(circle at 0 0, rgba(249, 250, 251, 0.05), transparent 65%),
          var(--bl-surface-soft);
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.9rem;
        height: 100%;
        overflow-y: auto;
        box-shadow: 0 16px 26px rgba(15, 23, 42, 0.85);
        scrollbar-width: thin;
      }

      .bl-info-card::-webkit-scrollbar {
        width: 6px;
      }
      .bl-info-card::-webkit-scrollbar-thumb {
        background-color: rgba(148, 132, 96, 0.9);
        border-radius: 999px;
      }

      .bl-info-header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 0.75rem;
      }

      .bl-info-main {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .bl-info-titles {
        display: flex;
        flex-direction: column;
        gap: 0.12rem;
      }

      .bl-info-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.09em;
        color: var(--bl-text-subtle);
      }

      .bl-info-title {
        font-size: 1rem;
        font-weight: 500;
      }

      .bl-info-subtitle {
        font-size: 0.84rem;
        color: var(--bl-text-subtle);
        line-height: 1.6;
      }

      .bl-defence-badge {
        border-radius: 14px;
        padding: 0.45rem 0.7rem;
        background:
          linear-gradient(
            135deg,
            rgba(15, 23, 42, 0.95),
            rgba(30, 41, 59, 0.96)
          );
        border: 1px solid rgba(148, 132, 96, 0.6);
        display: flex;
        align-items: center;
        gap: 0.45rem;
        font-size: 0.8rem;
        color: var(--bl-text-main);
      }

      .bl-defence-icon {
        width: 26px;
        height: 26px;
        border-radius: 999px;
        display: flex;
        align-items: center;
        justify-content: center;
        background:
          radial-gradient(circle at 30% 0, #facc6b, #b45309),
          radial-gradient(circle at 130% 140%, #020617, #020617);
        color: #111827;
        box-shadow:
          0 8px 16px rgba(15, 23, 42, 0.8),
          inset 0 0 0 1px rgba(250, 204, 21, 0.7);
      }

      .bl-defence-text-main {
        font-weight: 500;
      }

      .bl-defence-text-sub {
        display: block;
        font-size: 0.78rem;
        color: var(--bl-text-subtle);
      }

      .bl-section-title {
        font-size: 0.78rem;
        text-transform: uppercase;
        letter-spacing: 0.09em;
        color: var(--bl-text-subtle);
        font-weight: 600;
        margin-bottom: 0.25rem;
      }

      .bl-pill-row {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
      }

      .bl-pill {
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        padding: 0.3rem 0.75rem;
        border-radius: 999px;
        border: 1px solid var(--bl-border-soft);
        background: rgba(18, 20, 32, 0.98);
        font-size: 0.78rem;
        color: var(--bl-text-main);
      }

      .bl-pill i {
        font-size: 0.9rem;
      }

      .bl-muted-list {
        margin: 0;
        padding-left: 1.05rem;
        font-size: 0.84rem;
        color: var(--bl-text-subtle);
      }

      .bl-muted-list li + li {
        margin-top: 0.12rem;
      }

      .bl-note {
        font-size: 0.78rem;
        color: var(--bl-text-subtle);
      }

      .bl-warning {
        font-size: 0.78rem;
        color: var(--bl-accent-gold);
      }

      .bl-quick-section {
        border-radius: 14px;
        border: 1px solid rgba(148, 132, 96, 0.38);
        background:
          linear-gradient(
            135deg,
            rgba(17, 24, 39, 0.98),
            rgba(24, 29, 49, 0.98)
          );
        padding: 0.6rem 0.7rem 0.7rem;
      }

      .bl-quick-header {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        margin-bottom: 0.35rem;
      }

      .bl-quick-header span:last-child {
        font-size: 0.8rem;
        color: var(--bl-text-subtle);
      }

      .bl-category-pill {
        font-size: 0.74rem;
        border-radius: 999px;
        border: 1px solid rgba(148, 132, 96, 0.8);
        padding: 0.16rem 0.7rem;
        color: var(--bl-text-main);
        background: rgba(24, 24, 27, 0.95);
      }

      .bl-quick-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 0.3rem;
        margin-top: 0.15rem;
      }

      .bl-chip-btn {
        border-radius: 999px;
        border: 1px solid var(--bl-border-soft);
        background: rgba(18, 20, 32, 0.98);
        color: var(--bl-text-main);
        font-size: 0.78rem;
        padding: 0.28rem 0.8rem;
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        cursor: pointer;
        text-align: left;
      }

      .bl-chip-btn i {
        font-size: 0.85rem;
      }

      .bl-chip-btn:hover {
        border-color: var(--bl-accent-gold);
        color: var(--bl-accent-gold);
      }

      /* =========================================
         RIGHT PANEL – CHAT
         ========================================= */
      .bl-chat-card {
        border-radius: 18px;
        border: 1px solid var(--bl-border-soft);
        background:
          radial-gradient(circle at 0 0, rgba(249, 250, 251, 0.04), transparent 60%),
          var(--bl-surface);
        padding: 0.9rem;
        display: flex;
        flex-direction: column;
        height: 100%;
        min-height: 0;
        box-shadow:
          0 18px 30px rgba(15, 23, 42, 0.9),
          0 0 0 0.5px rgba(148, 132, 96, 0.3) inset;
      }

      .bl-chat-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 0.75rem;
        padding-bottom: 0.6rem;
        border-bottom: 1px solid rgba(148, 132, 96, 0.3);
        transition:
          opacity 0.2s ease,
          max-height 0.2s ease,
          padding-bottom 0.2s ease,
          margin-bottom 0.2s ease,
          border-bottom-color 0.2s ease;
      }

      .bl-chat-header-collapsed {
        opacity: 0;
        max-height: 0;
        padding-bottom: 0;
        margin-bottom: 0;
        border-bottom-color: transparent;
        overflow: hidden;
      }

      .bl-chat-header-left {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
      }

      .bl-chat-logo {
        width: 44px;
        height: 44px;
      }

      .bl-chat-heading {
        display: flex;
        flex-direction: column;
        gap: 0.15rem;
      }

      .bl-chat-title {
        font-family: "DM Serif Display", "Times New Roman", serif;
        font-size: 1.08rem;
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }

      .bl-chat-subtitle {
        font-size: 0.86rem;
        color: var(--bl-text-subtle);
        max-width: 520px;
        line-height: 1.6;
      }

      .bl-chat-header-right {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 0.18rem;
        font-size: 0.72rem;
        color: var(--bl-text-subtle);
      }

      @media (max-width: 768px) {
        .bl-chat-header {
          flex-direction: column;
        }
        .bl-chat-header-right {
          align-items: flex-start;
        }
      }

      .bl-chat-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        margin-top: 0.3rem;
      }

      .bl-chat-window {
        flex: 1;
        overflow-y: auto;
        padding-right: 0.3rem;
        display: flex;
        flex-direction: column;
        gap: 0.55rem;
        scrollbar-width: thin;
        scrollbar-color: rgba(148, 132, 96, 0.9) transparent;
      }

      .bl-chat-window::-webkit-scrollbar {
        width: 6px;
      }
      .bl-chat-window::-webkit-scrollbar-thumb {
        background-color: rgba(148, 132, 96, 0.9);
        border-radius: 999px;
      }

      .bl-chat-message {
        display: flex;
        flex-direction: column;
        max-width: 82%;
      }

      .bl-chat-bot {
        align-items: flex-start;
      }

      .bl-chat-user {
        margin-left: auto;
        align-items: flex-end;
      }

      .bl-bubble {
        padding: 0.7rem 1rem;
        font-size: 0.98rem;
        line-height: 1.8;
      }

      .bl-bubble-bot {
        background:
          radial-gradient(circle at 0 0, rgba(148, 132, 96, 0.18), transparent 70%),
          var(--bl-bot-bubble);
        border-radius: 14px;
        border-bottom-left-radius: 6px;
        border: 1px solid rgba(148, 132, 96, 0.9);
        font-family: "Merriweather", "Georgia", "Times New Roman", serif;
        font-size: 0.96rem;
        line-height: 1.9;
        letter-spacing: 0.01em;
        box-shadow:
          0 10px 18px rgba(15, 23, 42, 0.96),
          inset 0 0 0 1px rgba(24, 24, 27, 0.92);
      }

      .bl-bubble-bot strong {
        font-weight: 700;
      }

      .bl-bubble-user {
        background:
          radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.5), transparent 72%),
          var(--bl-user-bubble);
        border-radius: 18px;
        border-bottom-right-radius: 6px;
        color: #eaf4ff;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        box-shadow:
          0 10px 18px rgba(15, 118, 178, 0.9),
          inset 0 0 0 1px rgba(15, 23, 42, 0.95);
      }

      .bl-timestamp {
        margin-top: 0.15rem;
        font-size: 0.72rem;
        color: var(--bl-text-subtle);
      }

      .bl-bubble-suggest-wrap {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        margin-top: 0.45rem;
      }

      .bl-bubble-suggest {
        border-radius: 999px;
        border: 1px solid var(--bl-border-soft);
        background: rgba(18, 20, 32, 0.98);
        color: var(--bl-text-main);
        font-size: 0.82rem;
        padding: 0.32rem 0.85rem;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        cursor: pointer;
      }

      .bl-bubble-suggest i {
        font-size: 0.9rem;
      }

      .bl-bubble-suggest:hover {
        border-color: var(--bl-accent-gold);
        color: var(--bl-accent-gold);
      }

      /* Typing indicator */
      .bl-typing-indicator {
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .bl-typing-dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background-color: #e5e7eb;
        opacity: 0.4;
        animation: bl-bounce 1s infinite;
      }

      .bl-typing-dot:nth-child(2) {
        animation-delay: 0.15s;
      }

      .bl-typing-dot:nth-child(3) {
        animation-delay: 0.3s;
      }

      @keyframes bl-bounce {
        0%,
        80%,
        100% {
          transform: translateY(0);
          opacity: 0.3;
        }
        40% {
          transform: translateY(-3px);
          opacity: 0.9;
        }
      }

      /* =========================================
         INPUT AREA
         ========================================= */
      .bl-chat-input {
        border-top: 1px solid rgba(148, 132, 96, 0.32);
        padding-top: 0.55rem;
        margin-top: 0.35rem;
        flex-shrink: 0;
      }

      .bl-input-label {
        font-size: 0.8rem;
        color: var(--bl-text-subtle);
        margin-bottom: 0.3rem;
      }

      .bl-input-row {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .bl-input-wrapper {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 0.35rem;
        border-radius: 999px;
        padding: 0.1rem 0.4rem 0.1rem 0.1rem;
        border: 1px solid rgba(148, 132, 96, 0.7);
        background: rgba(12, 14, 24, 0.98);
      }

      .bl-input-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.38rem 0.65rem;
        border-radius: 999px;
        background: transparent;
        color: var(--bl-text-subtle);
      }

      .bl-input-control {
        flex: 1;
        border: none;
        background: transparent;
        color: var(--bl-text-main);
        font-size: 0.95rem;
        padding: 0.4rem 0.2rem;
        resize: none;
        max-height: 120px;
        outline: none;
        line-height: 1.45;
      }

      .bl-input-control::placeholder {
        color: var(--bl-text-subtle);
        font-size: 0.88rem;
      }

      .bl-input-wrapper:focus-within {
        border-color: var(--bl-accent-gold);
        box-shadow:
          0 0 0 1px var(--bl-accent-gold-soft),
          0 0 0 1px rgba(15, 23, 42, 0.9);
      }

      .bl-send-btn {
        border-radius: 999px;
        border: 0;
        padding: 0.55rem 1.15rem;
        background-image: linear-gradient(135deg, #f5c15a, #7c2d12);
        color: #111827;
        font-weight: 600;
        font-size: 0.86rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.35rem;
        box-shadow:
          0 12px 22px rgba(15, 23, 42, 0.92),
          inset 0 0 0 1px rgba(248, 250, 252, 0.2);
      }

      .bl-send-btn:disabled {
        opacity: 0.7;
        cursor: wait;
      }

      .bl-input-footer {
        margin-top: 0.35rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.76rem;
      }

      kbd {
        border-radius: 4px;
        padding: 0.1rem 0.35rem;
        font-size: 0.7rem;
        background: rgba(23, 23, 33, 0.98);
        border: 1px solid rgba(148, 163, 184, 0.7);
        color: var(--bl-text-main);
      }

      @media (max-width: 576px) {
        .bl-chat-card {
          min-height: calc(100vh - 140px);
        }
        .bl-chat-message {
          max-width: 90%;
        }
        .bl-input-footer {
          flex-direction: column;
          align-items: flex-start;
        }
      }

      /* =========================================
         LIGHT MODE
         ========================================= */
      body.bl-light {
        --bl-bg: #f2ece3;
        --bl-surface: #ffffff;
        --bl-surface-soft: #fbf5ea;
        --bl-border-soft: rgba(176, 148, 98, 0.85);
        --bl-text-main: #111827;
        --bl-text-subtle: #4b5563;
        --bl-accent-gold: #b45309;
        --bl-accent-gold-soft: rgba(180, 83, 9, 0.18);
        --bl-accent-deep: #7c2d12;
        --bl-user-bubble: #145c8b;
        --bl-bot-bubble: #ffffff;
      }

      body.bl-light {
        background:
          radial-gradient(circle at 0 0, rgba(252, 252, 249, 0.96), transparent 60%),
          radial-gradient(circle at 100% 100%, rgba(234, 231, 221, 0.95), transparent 60%),
          var(--bl-bg);
      }

      body.bl-light .bl-navbar {
        background:
          radial-gradient(circle at 0 0, rgba(249, 250, 251, 0.95), transparent 70%),
          #f9fafb;
        border-bottom-color: #e5e7eb;
      }

      body.bl-light .bl-badge-soft,
      body.bl-light .bl-theme-toggle,
      body.bl-light .bl-chip-btn,
      body.bl-light .bl-bubble-suggest,
      body.bl-light .bl-pill {
        background: #f9fafb;
        border-color: #d1c3a1;
        color: #111827;
      }

      body.bl-light .bl-info-card {
        background: #fbf5ea;
        box-shadow:
          0 10px 16px rgba(176, 148, 98, 0.25),
          0 0 0 1px rgba(209, 194, 158, 0.7) inset;
      }

      body.bl-light .bl-chat-card {
        background: #ffffff;
        box-shadow:
          0 12px 18px rgba(176, 148, 98, 0.25),
          0 0 0 1px rgba(209, 194, 158, 0.8) inset;
      }

      body.bl-light .bl-input-wrapper {
        background: #f9fafb;
        border-color: #d1c3a1;
      }

      body.bl-light .bl-input-control {
        color: #111827;
      }

      body.bl-light .bl-bubble-bot {
        background:
          radial-gradient(circle at 0 0, rgba(248, 250, 252, 0.9), transparent 70%),
          #fffdf7;
        border-color: #d1c3a1;
        box-shadow:
          0 8px 16px rgba(176, 148, 98, 0.38),
          inset 0 0 0 1px rgba(229, 231, 235, 0.9);
      }

      body.bl-light .bl-bubble-user {
        box-shadow:
          0 8px 16px rgba(37, 99, 235, 0.38),
          inset 0 0 0 1px rgba(59, 130, 246, 0.8);
      }

      body.bl-light kbd {
        background: #f3f4f6;
        border-color: #d1d5db;
        color: #111827;
      }

      /* Light mode specific fixes for the request */

      body.bl-light .bl-quick-section {
        background: #fffaf2;
        border-color: #d1c3a1;
      }

      body.bl-light .bl-quick-header span:last-child {
        color: #4b5563;
      }

      body.bl-light .bl-category-pill {
        background: #111827;
        color: #f9fafb;
        border-color: #b0894f;
      }

      body.bl-light .bl-defence-badge {
        background: #fff7ea;
        border-color: #d1c3a1;
        color: #111827;
        box-shadow: 0 6px 14px rgba(176, 148, 98, 0.25);
      }

      body.bl-light .bl-defence-text-sub {
        color: #4b5563;
      }

      body.bl-light .bl-defence-icon {
        background:
          radial-gradient(circle at 30% 0, #fbbf24, #b45309),
          radial-gradient(circle at 130% 140%, #fef3c7, #fef3c7);
        color: #111827;
        box-shadow:
          0 4px 10px rgba(176, 148, 98, 0.4),
          inset 0 0 0 1px rgba(250, 204, 21, 0.8);
      }

      body.bl-light .bl-bubble-suggest {
        background: #f9fafb;
        border-color: #d1c3a1;
        color: #111827;
      }
    </style>
  </head>

  <body>
    <!-- NAVBAR -->
    <nav class="bl-navbar" aria-label="Main navigation">
      <div class="bl-nav-inner">
        <a href="/" class="bl-brand">
          <div class="bl-logo-mark" aria-hidden="true">
            <div class="bl-logo-inner">
              <div class="bl-logo-topbar"></div>
              <div class="bl-logo-pillar"></div>
              <span class="bl-logo-text">BLB</span>
            </div>
          </div>
          <div class="bl-brand-text">
            <div class="bl-brand-title">Bharat LawBot</div>
            <div class="bl-brand-subtitle">Indian Legal Defence Assistant</div>
          </div>
        </a>
        <div class="bl-nav-right">
          <span class="bl-online-pill">
            <span class="bl-dot"></span> Online legal insight
          </span>
          <span class="bl-badge-soft">
            <i class="bi bi-shield-lock me-1"></i>
            Educational · Not legal advice
          </span>
          <button id="themeToggle" type="button" class="bl-theme-toggle">
            <i class="bi bi-moon-stars"></i>
            <span class="d-none d-sm-inline">Dark</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="bl-main">
      <div class="bl-main-inner">
        <div class="bl-grid">
          <!-- LEFT PANEL -->
          <section class="bl-info-card" aria-label="About Bharat LawBot">
            <header class="bl-info-header">
              <div class="bl-info-main">
                <div class="bl-logo-mark" aria-hidden="true">
                  <div class="bl-logo-inner">
                    <div class="bl-logo-topbar"></div>
                    <div class="bl-logo-pillar"></div>
                    <span class="bl-logo-text">BLB</span>
                  </div>
                </div>
                <div class="bl-info-titles">
                  <span class="bl-info-label">Client profile</span>
                  <h1 class="bl-info-title mb-0">Guest user · India</h1>
                  <p class="bl-info-subtitle mb-0">
                    Bharat LawBot helps you understand
                    <strong>Indian law from a defence perspective</strong> – how courts
                    usually think about FIRs, bail, evidence, matrimonial disputes,
                    property and financial cases – so you can talk more clearly with
                    your advocate.
                  </p>
                </div>
              </div>
            </header>

            <!-- Defence-oriented section -->
            <section aria-label="Defence-oriented perspective">
              <div class="bl-defence-badge mt-1">
                <div class="bl-defence-icon">
                  <i class="bi bi-shield-shaded"></i>
                </div>
                <div>
                  <span class="bl-defence-text-main">
                    Defence-oriented perspective
                  </span>
                  <span class="bl-defence-text-sub">
                    Explores lawful defence themes, possible weaknesses in accusations
                    and typical court thinking – without promising outcomes or giving
                    personal legal advice.
                  </span>
                </div>
              </div>
            </section>

            <section aria-label="Practice domains">
              <div class="bl-section-title mt-3">
                Key practice domains (Indian law)
              </div>
              <div class="bl-pill-row">
                <span class="bl-pill">
                  <i class="bi bi-heartbreak"></i>
                  Matrimonial · Divorce · DV
                </span>
                <span class="bl-pill">
                  <i class="bi bi-gavel"></i>
                  Criminal law · FIR · Bail
                </span>
                <span class="bl-pill">
                  <i class="bi bi-receipt"></i>
                  Cheque bounce · Financial disputes
                </span>
                <span class="bl-pill">
                  <i class="bi bi-house-door"></i>
                  Property &amp; civil litigation
                </span>
                <span class="bl-pill">
                  <i class="bi bi-briefcase"></i>
                  Employment &amp; workplace issues
                </span>
                <span class="bl-pill">
                  <i class="bi bi-globe2"></i>
                  NRI &amp; cross-border questions
                </span>
              </div>
            </section>

            <section aria-label="How to describe your case">
              <div class="bl-section-title mt-3">How to describe your situation</div>
              <ul class="bl-muted-list">
                <li>
                  Use simple English and share events in
                  <strong>chronological order</strong> (who did what, when, where).
                </li>
                <li>
                  Mention <strong>sections</strong> if you know them
                  (498A, 406, 138 NI Act, 125 CrPC, etc.), or share orders / notices.
                </li>
                <li>
                  Tell the <strong>stage of the matter</strong>:
                  notice, FIR, investigation, charge sheet, trial, appeal.
                </li>
                <li>
                  Mention important <strong>documents or records</strong>:
                  chats, emails, bank entries, agreements, CCTV, court orders.
                </li>
              </ul>
            </section>

            <!-- SUBJECT-ORIENTED QUICK PROMPTS -->
            <section aria-label="Quick legal topics">
              <div class="bl-section-title mt-3">Start with a topic</div>

              <div class="bl-quick-section mb-2">
                <div class="bl-quick-header">
                  <span class="bl-category-pill">
                    <i class="bi bi-heartbreak me-1"></i>Matrimonial &amp; DV
                  </span>
                  <span>Separation, 498A, domestic violence and maintenance.</span>
                </div>
                <div class="bl-quick-chips">
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="There is an FIR under Sections 498A and 406 IPC from my wife and in-laws. In general terms, what ingredients must be proved and what defence angles do lawyers sometimes explore?"
                  >
                    <i class="bi bi-heartbreak"></i>
                    498A + 406 – defence themes
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="In general terms, how do Indian courts look at allegations of mental cruelty in matrimonial disputes, and what defence themes do lawyers sometimes rely on?"
                  >
                    <i class="bi bi-emoji-frown"></i>
                    Mental cruelty – court view
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="Explain, in general terms, how Domestic Violence (DV) Act complaints are usually viewed by courts and what typical defence approaches may be discussed."
                  >
                    <i class="bi bi-house-heart"></i>
                    DV Act – typical defence
                  </button>
                </div>
              </div>

              <div class="bl-quick-section mb-2">
                <div class="bl-quick-header">
                  <span class="bl-category-pill">
                    <i class="bi bi-gavel me-1"></i>Criminal law &amp; bail
                  </span>
                  <span>FIR, arrest, anticipatory bail and quashing.</span>
                </div>
                <div class="bl-quick-chips">
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="Explain in simple language how Indian courts usually think about anticipatory bail, including common factors they consider (not case-specific advice)."
                  >
                    <i class="bi bi-shield-exclamation"></i>
                    Anticipatory bail – overview
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="In general terms, how do courts approach a regular bail application in non-bailable offences, and what broad defence themes are often argued?"
                  >
                    <i class="bi bi-unlock"></i>
                    Regular bail – court factors
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="In broad terms, how do Indian courts look at petitions for quashing of FIR or criminal proceedings under Section 482 CrPC?"
                  >
                    <i class="bi bi-x-octagon"></i>
                    Quashing of FIR – overview
                  </button>
                </div>
              </div>

              <div class="bl-quick-section mb-2">
                <div class="bl-quick-header">
                  <span class="bl-category-pill">
                    <i class="bi bi-wallet2 me-1"></i>Money, work &amp; evidence
                  </span>
                  <span>Cheque bounce, salary issues and evidence rules.</span>
                </div>
                <div class="bl-quick-chips">
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="Summarise in clear points how cheque bounce cases under Indian law are generally viewed, and what kind of defence themes are commonly explored."
                  >
                    <i class="bi bi-receipt"></i>
                    Cheque bounce – defence themes
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="My employer has not paid salary for three months. In general terms, what legal options and broad patterns under Indian law are discussed?"
                  >
                    <i class="bi bi-briefcase"></i>
                    Unpaid salary – options
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="Please summarise the Indian Evidence Act in clear, numbered points for a non-lawyer reader."
                  >
                    <i class="bi bi-journal-text"></i>
                    Evidence Act – summary
                  </button>
                </div>
              </div>

              <div class="bl-quick-section">
                <div class="bl-quick-header">
                  <span class="bl-category-pill">
                    <i class="bi bi-house-door me-1"></i>Property &amp; NRI
                  </span>
                  <span>Land, flats, family property, NRI angles.</span>
                </div>
                <div class="bl-quick-chips">
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="There is a boundary dispute with my neighbour about a small piece of land. In general, how do Indian courts look at such disputes and what typical documents are important?"
                  >
                    <i class="bi bi-diagram-3"></i>
                    Boundary dispute – key points
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="I am an NRI and there is a dispute over property in India. In broad terms, what legal aspects and documents usually become important?"
                  >
                    <i class="bi bi-airplane"></i>
                    NRI property dispute – overview
                  </button>
                  <button
                    type="button"
                    class="bl-chip-btn bl-quick"
                    data-question="Explain in general terms how courts treat electronic evidence in civil and criminal cases under the Indian Evidence Act."
                  >
                    <i class="bi bi-cpu"></i>
                    Electronic evidence – basics
                  </button>
                </div>
              </div>
            </section>

            <section aria-label="Important disclaimer" class="mt-3">
              <div class="bl-section-title">Important note</div>
              <p class="bl-note mb-1">
                Bharat LawBot explains
                <strong>general legal principles and defence patterns</strong> based on
                the legal material available. It helps you prepare better questions and
                understand the overall landscape.
              </p>
              <p class="bl-warning mb-0">
                It does <strong>not</strong> replace personalised advice from a
                practising advocate and does <strong>not</strong> guarantee any outcome
                in court.
              </p>
            </section>
          </section>

          <!-- RIGHT PANEL – CHAT -->
          <section class="bl-chat-card" aria-label="Chat with Bharat LawBot">
            <header class="bl-chat-header" id="bl-chat-header">
              <div class="bl-chat-header-left">
                <div class="bl-logo-mark bl-chat-logo" aria-hidden="true">
                  <div class="bl-logo-inner">
                    <div class="bl-logo-topbar"></div>
                    <div class="bl-logo-pillar"></div>
                    <span class="bl-logo-text">BLB</span>
                  </div>
                </div>
                <div class="bl-chat-heading">
                  <h2 class="bl-chat-title mb-0">Bharat LawBot</h2>
                  <p class="bl-chat-subtitle mb-0">
                    A defence-oriented Indian legal assistant. It helps you understand
                    how law usually works, where accusations may be strong or weak in
                    principle, and what to discuss with your lawyer in a structured way.
                  </p>
                </div>
              </div>
              <div class="bl-chat-header-right">
                <span>
                  <i class="bi bi-journal-text me-1"></i>
                  RAG over curated legal content
                </span>
                <span>
                  <i class="bi bi-exclamation-triangle me-1"></i>
                  Educational only · Not legal advice
                </span>
              </div>
            </header>

            <div class="bl-chat-body">
              <div id="chatWindow" class="bl-chat-window">
                <div class="bl-chat-message bl-chat-bot">
                  <div class="bl-bubble bl-bubble-bot">
                    Namaste. I am <strong>Bharat LawBot</strong>, a defence-oriented
                    Indian legal assistant.

                    <br /><br />
                    I can help you:
                    <br />
                    • understand the legal ingredients of offences and claims,<br />
                    • see where allegations may be strong or weak in principle,<br />
                    • understand how courts usually think about bail, quashing, discharge
                    and trial,<br />
                    • prepare clearer questions and points for your advocate.

                    <br /><br />
                    I do <strong>not</strong> give personalised legal advice or predict
                    exact outcomes. I explain general legal principles and typical
                    reasoning patterns based on the material available.
                  </div>
                  <div class="bl-timestamp">now</div>
                </div>

                <div class="bl-chat-message bl-chat-bot">
                  <div class="bl-bubble bl-bubble-bot">
                    <span class="bl-category-pill mb-1 d-inline-block">
                      <i class="bi bi-lightbulb me-1"></i>
                      Try one of these to start
                    </span>
                    <div class="bl-bubble-suggest-wrap">
                      <button
                        type="button"
                        class="bl-bubble-suggest bl-quick"
                        data-question="Please summarise the Indian Evidence Act in clear, numbered points for a non-lawyer reader."
                      >
                        <i class="bi bi-journal-text"></i>
                        Summarise Evidence Act
                      </button>
                      <button
                        type="button"
                        class="bl-bubble-suggest bl-quick"
                        data-question="My wife has filed an FIR under Section 498A IPC and 406 IPC. In general terms, what ingredients must be proved and what defence themes do lawyers sometimes explore?"
                      >
                        <i class="bi bi-heartbreak"></i>
                        498A + 406 – defence themes
                      </button>
                      <button
                        type="button"
                        class="bl-bubble-suggest bl-quick"
                        data-question="Explain the usual approach of Indian courts to anticipatory bail, including typical factors they consider and broad patterns (not case-specific advice)."
                      >
                        <i class="bi bi-shield-exclamation"></i>
                        Anticipatory bail overview
                      </button>
                      <button
                        type="button"
                        class="bl-bubble-suggest bl-quick"
                        data-question="There is an allegation of online cheating or cyber fraud. In general, what legal issues and defence patterns do lawyers often examine?"
                      >
                        <i class="bi bi-globe2"></i>
                        Cyber fraud – key issues
                      </button>
                    </div>
                  </div>
                  <div class="bl-timestamp"></div>
                </div>
              </div>

              <div class="bl-chat-input">
                <label class="bl-input-label" for="bl-input">
                  Type your question (Enter to send, Shift+Enter for new line)
                </label>
                <div class="bl-input-row">
                  <div class="bl-input-wrapper">
                    <span class="bl-input-icon d-none d-sm-inline-flex">
                      <i class="bi bi-pencil-square"></i>
                    </span>
                    <textarea
                      id="bl-input"
                      class="bl-input-control"
                      rows="1"
                      placeholder="Describe your situation in simple words. Example: “FIR under 498A and 406 IPC is registered; what are the basic ingredients and defence patterns courts usually consider?”"
                      autocomplete="off"
                      autocorrect="off"
                      autocapitalize="sentences"
                      spellcheck="false"
                    ></textarea>
                  </div>
                  <button id="sendBtn" type="button" class="bl-send-btn">
                    <span class="d-none d-md-inline">
                      <i class="bi bi-send-fill me-1"></i>
                      Ask Bharat LawBot
                    </span>
                    <span class="d-inline d-md-none">
                      <i class="bi bi-send-fill"></i>
                    </span>
                  </button>
                </div>
                <div class="bl-input-footer">
                  <small class="text-muted">
                    Press <kbd>Enter</kbd> to send · <kbd>Shift + Enter</kbd> for a new
                    line
                  </small>
                  <small class="text-muted d-none d-sm-inline">
                    For any critical decision, always consult a practising advocate with
                    your full documents.
                  </small>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Chat + Theme Script -->
    <script>
      (function () {
        function safeReady(fn) {
          if (
            document.readyState === "complete" ||
            document.readyState === "interactive"
          ) {
            setTimeout(fn, 1);
          } else {
            document.addEventListener("DOMContentLoaded", fn);
          }
        }

        safeReady(function () {
          const chatWindow = document.getElementById("chatWindow");
          const userInput = document.getElementById("bl-input");
          const sendBtn = document.getElementById("sendBtn");
          const quickButtons = document.querySelectorAll(".bl-quick");
          const themeToggle = document.getElementById("themeToggle");
          const chatHeader = document.getElementById("bl-chat-header");

          if (!chatWindow || !userInput || !sendBtn) {
            console.warn("Bharat LawBot UI elements not found.");
            return;
          }

          /* THEME HANDLING */
          function applyTheme(theme) {
            const body = document.body;
            if (theme === "light") {
              body.classList.add("bl-light");
              if (themeToggle) {
                themeToggle.innerHTML =
                  '<i class="bi bi-sun-fill"></i><span class="d-none d-sm-inline">Light</span>';
              }
            } else {
              body.classList.remove("bl-light");
              if (themeToggle) {
                themeToggle.innerHTML =
                  '<i class="bi bi-moon-stars"></i><span class="d-none d-sm-inline">Dark</span>';
              }
            }
          }

          const storedTheme = localStorage.getItem("bl-theme");
          applyTheme(storedTheme === "light" ? "light" : "dark");

          if (themeToggle) {
            themeToggle.addEventListener("click", function () {
              const isLight = document.body.classList.contains("bl-light");
              const newTheme = isLight ? "dark" : "light";
              applyTheme(newTheme);
              localStorage.setItem("bl-theme", newTheme);
            });
          }

          /* CHAT LOGIC */
          let isWaiting = false;
          let hasUserInteracted = false;

          function scrollToBottom() {
            chatWindow.scrollTop = chatWindow.scrollHeight;
          }

          function autoResizeTextarea() {
            userInput.style.height = "auto";
            userInput.style.height = userInput.scrollHeight + "px";
          }

          function collapseHeaderOnce() {
            if (!hasUserInteracted) {
              hasUserInteracted = true;
              if (chatHeader) {
                chatHeader.classList.add("bl-chat-header-collapsed");
              }
            }
          }

          function addMessage(text, sender, typing) {
            const msg = document.createElement("div");
            msg.classList.add("bl-chat-message");
            msg.classList.add(sender === "user" ? "bl-chat-user" : "bl-chat-bot");

            const bubble = document.createElement("div");
            bubble.classList.add("bl-bubble");
            bubble.classList.add(
              sender === "user" ? "bl-bubble-user" : "bl-bubble-bot"
            );

            if (typing) {
              bubble.classList.add("bl-typing-indicator");
              bubble.innerHTML = `
                <span class="bl-typing-dot"></span>
                <span class="bl-typing-dot"></span>
                <span class="bl-typing-dot"></span>
              `;
            } else {
              const lines = String(text || "").split("\n");
              lines.forEach(function (line, idx) {
                const span = document.createElement("span");
                span.textContent = line;
                bubble.appendChild(span);
                if (idx < lines.length - 1) {
                  bubble.appendChild(document.createElement("br"));
                }
              });
            }

            const ts = document.createElement("div");
            ts.classList.add("bl-timestamp");
            if (!typing) {
              const now = new Date();
              try {
                ts.textContent = now.toLocaleTimeString([], {
                  hour: "2-digit",
                  minute: "2-digit",
                });
              } catch (e) {
                ts.textContent = "";
              }
            }

            msg.appendChild(bubble);
            msg.appendChild(ts);
            chatWindow.appendChild(msg);
            scrollToBottom();
            return msg;
          }

          async function sendMessage(customText) {
            const raw = customText != null ? customText : userInput.value;
            const text = (raw || "").trim();
            if (!text || isWaiting) return;

            collapseHeaderOnce();

            addMessage(text, "user", false);
            if (!customText) {
              userInput.value = "";
              autoResizeTextarea();
            }

            isWaiting = true;
            userInput.disabled = true;
            sendBtn.disabled = true;

            const typingMsg = addMessage("", "bot", true);

            try {
              const res = await fetch("/get?msg=" + encodeURIComponent(text));
              let data;
              try {
                data = await res.json();
              } catch (parseErr) {
                console.error("JSON parse error:", parseErr);
                data = { response: "The server returned an invalid response." };
              }

              if (typingMsg && chatWindow.contains(typingMsg)) {
                chatWindow.removeChild(typingMsg);
              }

              const reply =
                (data && data.response) ||
                "I could not generate a response right now. Please try again later or consult a practising advocate.";

              addMessage(reply, "bot", false);
            } catch (err) {
              console.error("Backend error:", err);
              if (typingMsg && chatWindow.contains(typingMsg)) {
                chatWindow.removeChild(typingMsg);
              }
              addMessage(
                "There was a technical issue reaching Bharat LawBot. Please try again in a moment. For urgent matters, please speak to a practising advocate.",
                "bot",
                false
              );
            } finally {
              isWaiting = false;
              userInput.disabled = false;
              sendBtn.disabled = false;
              userInput.focus();
            }
          }

          /* EVENTS */
          sendBtn.addEventListener("click", function () {
            sendMessage();
          });

          userInput.addEventListener("keydown", function (e) {
            if (e.key === "Enter" && !e.shiftKey) {
              e.preventDefault();
              sendMessage();
            }
          });

          userInput.addEventListener("input", autoResizeTextarea);
          autoResizeTextarea();
          userInput.focus();

          quickButtons.forEach(function (btn) {
            btn.addEventListener("click", function () {
              const q = btn.getAttribute("data-question") || "";
              if (q) {
                sendMessage(q);
              }
            });
          });
        });
      })();
    </script>
  </body>
</html>
